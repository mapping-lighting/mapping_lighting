<p id="notice"><%= notice %></p>

<div id="map" style="height:300px;"></div>


<h1>Listing Observations</h1>

<table>
  <thead>
    <tr>
      <th>Hashid</th>
      <th>Observed at</th>
      <th>Recorder location</th>
      <th>Recorder location data</th>
      <th>Image exif</th>
      <th>Note</th>
      <th>Email</th>
      <th>Name</th>
      <th>Session</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @observations.each do |observation| %>
      <tr>
        <td><%= observation.hashid %></td>
        <td><%= observation.observed_at %></td>
        <td><%= observation.recorder_location %></td>
        <td><%= observation.recorder_location_data %></td>
        <td><%= truncate(observation.image_exif.to_s) %></td>
        <td><%= observation.note %></td>
        <td><%= observation.email %></td>
        <td><%= observation.name %></td>
        <td><%= observation.session_id %></td>
        <td><%= link_to 'Show', observation %></td>
        <td><%= link_to 'Edit', edit_observation_path(observation) %></td>
        <td><%= link_to 'Destroy', observation, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<script type="text/javascript">
  var coords_set = <%=  @observations.select{|o| o.recorder_location_data.present? }.map { |o| [ o.recorder_location_data['latitude'],o.recorder_location_data['longitude']] } %>;
</script>

<%= link_to 'New Observation', new_observation_path %>
