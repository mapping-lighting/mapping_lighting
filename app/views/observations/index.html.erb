<p id="notice"><%= notice %></p>

<div id="map" style="height:300px;"></div>


<h1>Listing Observations</h1>
<div class='table-responsive'>
  <table class='table table-striped table-hover'>
    <thead>
      <tr>
        <th>Observed at</th>
        <th>Lighting type</th>
        <th>Recorder location</th>
        <th>Note</th>
        <th>Email</th>
        <th>Name</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @observations.each do |observation| %>
        <tr>
          <td><%= observation.observed_at %></td>
          <td><%= observation.lighting_type %></td>
          <td><%= observation.recorder_location %></td>
          <td><%= observation.note %></td>
          <td><%= observation.email %></td>
          <td><%= observation.name %></td>
          <td><%= link_to observation do %>
                <span class="glyphicon glyphicon-eye-open"></span>
              <% end %>
          </td>
          <td><%= link_to observation, method: :delete, data: { confirm: 'Are you sure?' } do%>
                <span class="glyphicon glyphicon-remove-circle"></span>
              <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<script type="text/javascript">
  var coords_set = <%=  @observations.select{|o| o.recorder_location_data.present? }.map { |o| [ o.recorder_location_data['latitude'],o.recorder_location_data['longitude']] } %>;
</script>

<%= link_to 'New Observation', new_observation_path %>
